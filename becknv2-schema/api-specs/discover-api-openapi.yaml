openapi: 3.0.3
info:
  title: Beckn Discover API
  description: |
    A generic, extensible search and discovery API for any item types that extend the base Item.jsonld schema via owl:intersectionOf.
    
    The API supports both structured queries and natural language queries, with the ability to filter across extended item schemas while returning a unified catalog-based response structure. Response fields are automatically determined by the schema-settings.json referenced in each item's @context. It automatically adapts to any schema that extends beckn:Item.
    
    ## Key Features
    - Generic Schema Support: Any item type extending beckn:Item via owl:intersectionOf is automatically supported
    - JSON-LD Compatibility: Full support for JSON-LD context and type information
    - Catalog-Based Results: Returns catalogs containing items with proper schema context
    - Flexible Filtering: Support for filtering on any field from extended item schemas
    - Dynamic Context: Automatic context generation based on returned item types
    - Schema-Driven Responses: Response fields automatically determined by schema-settings.json
    - No Hardcoded Dependencies: API works with any new item schemas without changes
  version: 2.0.0
  contact:
    name: Beckn Protocol
    url: https://becknprotocol.io
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.becknprotocol.io/v2
    description: Production server
  - url: https://staging-api.becknprotocol.io/v2
    description: Staging server
  - url: http://localhost:8080/v2
    description: Local development server

paths:
  /beckn/discover:
    post:
      summary: Discover items across multiple schemas
      description: |
        Search and discover items across any schemas that extend beckn:Item via owl:intersectionOf.
        Supports both structured queries and natural language queries with automatic schema adaptation.
        Returns results in catalog format with proper schema context.
      operationId: discoverItems
      tags:
        - Discovery
        - Search
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DiscoverRequest'
            examples:
              structured_query:
                summary: Structured query for electronic items
                description: Search for gaming laptops with specific filters
                value:
                  id: "api.beckn.discover"
                  ver: "v2"
                  ts: "2024-04-10T16:10:50+05:30"
                  params:
                    msgid: "4a7f14c3-d61e-4d4f-be78-181834eeff6d"
                    traceid: "4a7f14c3-d61e-4d4f-be78-181834eeff6d"
                  request:
                    context:
                      network_id: "bap.net/electronics"
                      action: "discover"
                    structured_query:
                      text_search: "gaming laptop premium tech"
                      filters:
                        operator: "and"
                        conditions:
                          - "rating.value >= 4.0"
                          - "electronic:brand.name = 'Premium Tech'"
                          - "electronic:price.schema:price <= 2000"
                          - "locations.gps within_radius(40.7128, -74.0060, 10km)"
                      response_type: "basic"
                      pagination:
                        page: 1
                        limit: 20
              natural_language:
                summary: Natural language query for electronic items
                description: Human-readable search query for electronics
                value:
                  id: "api.beckn.discover"
                  ver: "v2"
                  ts: "2024-04-10T16:10:50+05:30"
                  params:
                    msgid: "5b8g25d4-e72f-5e5g-cf89-292945ff0g7e"
                    traceid: "5b8g25d4-e72f-5e5g-cf89-292945ff0g7e"
                  request:
                    context:
                      network_id: "bap.net/electronics"
                      action: "discover"
                    natural_query:
                      text: "I want to buy a red tesla model 3 under 50k near san francisco"
                      response_type: "basic"
                      pagination:
                        page: 1
                        limit: 20
              grocery_search:
                summary: Search for grocery items with specific filters
                description: Search for organic grocery items with nutritional filters
                value:
                  id: "api.beckn.discover"
                  ver: "v2"
                  ts: "2024-04-10T16:10:50+05:30"
                  params:
                    msgid: "6c9h36e5-f83g-6f6h-dg90-303056gg1h8f"
                    traceid: "6c9h36e5-f83g-6f6h-dg90-303056gg1h8f"
                  request:
                    context:
                      network_id: "bap.net/grocery"
                      action: "discover"
                    structured_query:
                      text_search: "organic apples fresh"
                      filters:
                        operator: "and"
                        conditions:
                          - "rating.value >= 4.0"
                          - "grocery:organicCertification ~ 'USDA Organic'"
                          - "grocery:expiryDate > '2024-12-31'"
                      response_type: "detailed"
                      pagination:
                        page: 1
                        limit: 10
      responses:
        '200':
          description: Successful discovery response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscoverResponse'
              examples:
                mixed_items:
                  summary: Electronic items catalog response
                  description: Response containing electronic items in catalog format
                  value:
                    id: "api.beckn.discover"
                    ver: "v2"
                    ts: "2024-04-10T16:10:50+05:30"
                    params:
                      msgid: "4a7f14c3-d61e-4d4f-be78-181834eeff6d"
                      traceid: "4a7f14c3-d61e-4d4f-be78-181834eeff6d"
                    response:
                      context:
                        network_id: "bap.net/electronics"
                        action: "discover"
                      catalogs:
                        - "@type": "beckn:Catalog"
                          "beckn:descriptor":
                            "@type": "beckn:Descriptor"
                            "schema:name": "Premium Tech Electronics Store"
                            "beckn:shortDesc": "High-quality electronics and gaming equipment"
                          "beckn:timePeriod":
                            "@type": "beckn:TimePeriod"
                            "schema:startDate": "2025-01-27"
                            "schema:endDate": "2026-12-31"
                          "beckn:items":
                            - "@context": "https://becknprotocol.io/schema/items/ElectronicItem/schema-settings.json"
                              "@type": "beckn:ElectronicItem"
                              "electronic:electronicItemId": "laptop-item-001"
                              "schema:name": "Premium Gaming Laptop Pro"
                              "beckn:descriptor":
                                "@type": "beckn:Descriptor"
                                "schema:name": "Premium Gaming Laptop Pro"
                                "beckn:shortDesc": "High-performance gaming laptop with RTX graphics"
                              "electronic:price":
                                "@type": "beckn:Price"
                                "schema:price": 1499.99
                                "schema:priceCurrency": "USD"
                              "electronic:brand":
                                "@type": "schema:Brand"
                                "schema:name": "Premium Tech"
                              "beckn:rating":
                                "@type": "beckn:Rating"
                                "beckn:ratingValue": 4.8
                                "beckn:ratingCount": 156
                electronic_only:
                  summary: Electronic items only response
                  description: Response containing only electronic items in catalog format
                  value:
                    id: "api.beckn.discover"
                    ver: "v2"
                    ts: "2024-04-10T16:10:50+05:30"
                    params:
                      msgid: "7d0i47f6-g94h-7g7i-eh01-414167hh2i9g"
                      traceid: "7d0i47f6-g94h-7g7i-eh01-414167hh2i9g"
                    response:
                      context:
                        network_id: "bap.net/electronics"
                        action: "discover"
                      catalogs:
                        - "@type": "beckn:Catalog"
                          "beckn:descriptor":
                            "@type": "beckn:Descriptor"
                            "schema:name": "Premium Tech Electronics Store"
                            "beckn:shortDesc": "High-quality electronics and gaming equipment"
                          "beckn:timePeriod":
                            "@type": "beckn:TimePeriod"
                            "schema:startDate": "2025-01-27"
                            "schema:endDate": "2026-12-31"
                          "beckn:items":
                            - "@context": "https://becknprotocol.io/schema/items/ElectronicItem/schema-settings.json"
                              "@type": "beckn:ElectronicItem"
                              "electronic:electronicItemId": "laptop-001"
                              "schema:name": "Premium Gaming Laptop Pro"
                              "beckn:descriptor":
                                "@type": "beckn:Descriptor"
                                "schema:name": "Premium Gaming Laptop Pro"
                                "beckn:shortDesc": "High-performance gaming laptop with RTX graphics"
                              "electronic:price":
                                "@type": "beckn:Price"
                                "schema:price": 1499.99
                                "schema:priceCurrency": "USD"
                              "electronic:brand":
                                "@type": "schema:Brand"
                                "schema:name": "Premium Tech"
                              "beckn:rating":
                                "@type": "beckn:Rating"
                                "beckn:ratingValue": 4.8
                                "beckn:ratingCount": 156
        '400':
          description: Bad request - Invalid parameters or schema
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_schema_field:
                  summary: Invalid schema field error
                  description: Error when referencing non-existent fields in extended schemas
                  value:
                    error:
                      code: "INVALID_SCHEMA_FIELD"
                      message: "Field 'electronic:invalidField' not found in ElectronicItem schema"
                      details:
                        field: "electronic:invalidField"
                        schema: "ElectronicItem"
                        available_fields:
                          - "electronic:brand"
                          - "electronic:sku"
                          - "electronic:price"
                context_resolution_failed:
                  summary: Context resolution failed error
                  description: Error when failing to resolve schema context
                  value:
                    error:
                      code: "CONTEXT_RESOLUTION_FAILED"
                      message: "Failed to resolve schema context for 'https://invalid-schema.com'"
                      details:
                        context_uri: "https://invalid-schema.com"
                        available_contexts:
                          - "https://becknprotocol.io/schema/context.jsonld"
        '422':
          description: Unprocessable entity - Schema validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /beckn/discover/browser-search:
    get:
      summary: Browser-friendly search API
      description: |
        URL-based search API for browser navigation and direct links.
        Response type is determined by the Accept header:
        - Accept: text/html (default) → Returns browser-friendly HTML page
        - Accept: application/json → Returns structured JSON data in same format as structured query API
        Supports both HTML and JSON responses based on client preference.
      operationId: browserSearch
      tags:
        - Discovery
        - Browser Search
      parameters:
        - name: Accept
          in: header
          required: false
          schema:
            type: string
            enum: [text/html, application/json]
            default: text/html
          description: |
            Response type preference. 
            - text/html: Returns browser-friendly HTML page (default)
            - application/json: Returns structured JSON data in same format as structured query API
          example: "text/html"
        - name: entity_type
          in: query
          required: true
          schema:
            type: string
            enum: [item, provider, catalog]
          description: Type of entity to search for
          example: "item"
        - name: item_id
          in: query
          required: false
          schema:
            type: string
          description: Specific item identifier
          example: "item_456"
        - name: provider_id
          in: query
          required: false
          schema:
            type: string
          description: Specific provider identifier
          example: "provider_123"
        - name: catalog_id
          in: query
          required: false
          schema:
            type: string
          description: Specific catalog identifier
          example: "catalog_789"
        - name: category
          in: query
          required: false
          schema:
            type: string
          description: Category filter
          example: "electric_vehicles"
        - name: brand
          in: query
          required: false
          schema:
            type: string
          description: Brand filter
          example: "tesla"
        - name: price_min
          in: query
          required: false
          schema:
            type: number
            minimum: 0
          description: Minimum price
          example: 0
        - name: price_max
          in: query
          required: false
          schema:
            type: number
            minimum: 0
          description: Maximum price
          example: 50000
        - name: rating_min
          in: query
          required: false
          schema:
            type: number
            minimum: 0
            maximum: 5
          description: Minimum rating
          example: 4.0
        - name: location
          in: query
          required: false
          schema:
            type: string
          description: Location name
          example: "san_francisco"
        - name: radius
          in: query
          required: false
          schema:
            type: number
            minimum: 0
          description: Search radius in km
          example: 25
        - name: featured
          in: query
          required: false
          schema:
            type: boolean
          description: Show only featured items
          example: true
        - name: offer
          in: query
          required: false
          schema:
            type: boolean
          description: Show only items with offers
          example: true
        - name: new
          in: query
          required: false
          schema:
            type: boolean
          description: Show only new items
          example: true
        - name: trending
          in: query
          required: false
          schema:
            type: boolean
          description: Show trending items
          example: true
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
          example: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: Items per page
          example: 20
        - name: sort
          in: query
          required: false
          schema:
            type: string
            enum: [rating, price, distance, date]
          description: Sort field
          example: "rating"
        - name: order
          in: query
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: "desc"
          description: Sort order
          example: "desc"
      responses:
        '200':
          description: Successful search response
          content:
            text/html:
              schema:
                type: string
                format: html
              description: Browser-friendly HTML search results page
              example: |
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Search Results - Electrify America 100kW Station | Beckn Catalog</title>
                    <meta name="description" content="Electrify America 100kW DC fast charging station - Available 24/7 with contactless payment.">
                    
                    <!-- Open Graph Tags -->
                    <meta property="og:title" content="Electrify America 100kW Station">
                    <meta property="og:description" content="100kW DC fast charging station from Electrify America">
                    <meta property="og:type" content="product">
                    <meta property="og:url" content="https://catalog.beckn.org/search?provider_id=provider_123&item_id=item_456">
                    
                    <!-- Structured Data -->
                    <script type="application/ld+json">
                    {
                      "@context": "https://schema.org",
                      "@type": "Product",
                      "name": "Electrify America 100kW Station",
                      "description": "100kW DC fast charging station with CCS and CHAdeMO connectors",
                      "brand": "Electrify America",
                      "category": "EV Charging",
                      "rating": {
                        "@type": "Rating",
                        "ratingValue": "4.8",
                        "reviewCount": "1250"
                      },
                      "offers": {
                        "@type": "Offer",
                        "price": "0.45",
                        "priceCurrency": "USD"
                      }
                    }
                    </script>
                </head>
                <body>
                    <header>
                        <nav>
                            <div class="search-bar">
                                <form action="/search" method="GET">
                                    <input type="text" name="query" placeholder="Search for products, services...">
                                    <button type="submit">Search</button>
                                </form>
                            </div>
                        </nav>
                    </header>
                    
                    <main>
                        <section class="search-results">
                            <div class="results-header">
                                <h1>Electrify America 100kW Station</h1>
                                <p>From Electrify America</p>
                            </div>
                            
                            <div class="results-grid">
                                <article class="result-item">
                                    <div class="item-image">
                                        <img src="/images/ev-charging-station.jpg" alt="EV Charging Station">
                                    </div>
                                    <div class="item-details">
                                        <h2>Electrify America 100kW Station</h2>
                                        <p class="description">100kW DC fast charging station with CCS and CHAdeMO connectors</p>
                                        <div class="rating">
                                            <span class="stars">★★★★★</span>
                                            <span class="rating-value">4.8</span>
                                            <span class="rating-count">(1,250 reviews)</span>
                                        </div>
                                        <div class="price">$0.45/kWh</div>
                                        <div class="location">San Francisco, CA</div>
                                        <div class="categories">
                                            <span class="category-tag">EV Charging</span>
                                            <span class="category-tag">Fast Charging</span>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        </section>
                    </main>
                    
                    <footer>
                        <p>&copy; 2024 Beckn Catalog. Powered by Beckn Protocol.</p>
                    </footer>
                </body>
                </html>
            application/json:
              schema:
                $ref: '#/components/schemas/DiscoverResponse'
              description: API-friendly structured data in the same format as structured query responses
              examples:
                electronic_items:
                  summary: Electronic items search results
                  description: JSON response for electronic items search
                  value:
                    id: "api.beckn.discover.browser-search"
                    ver: "v2"
                    ts: "2024-04-10T16:10:50+05:30"
                    params:
                      msgid: "browser-search-001"
                      traceid: "browser-search-001"
                    response:
                      context:
                        network_id: "bap.net/electronics"
                        action: "discover"
                      catalogs:
                        - "@type": "beckn:Catalog"
                          "beckn:descriptor":
                            "@type": "beckn:Descriptor"
                            "schema:name": "Premium Tech Electronics Store"
                            "beckn:shortDesc": "High-quality electronics and gaming equipment"
                          "beckn:timePeriod":
                            "@type": "beckn:TimePeriod"
                            "schema:startDate": "2025-01-27"
                            "schema:endDate": "2026-12-31"
                          "beckn:items":
                            - "@context": "https://becknprotocol.io/schema/items/ElectronicItem/schema-settings.json"
                              "@type": "beckn:ElectronicItem"
                              "electronic:electronicItemId": "laptop-item-001"
                              "schema:name": "Premium Gaming Laptop Pro"
                              "beckn:descriptor":
                                "@type": "beckn:Descriptor"
                                "schema:name": "Premium Gaming Laptop Pro"
                                "beckn:shortDesc": "High-performance gaming laptop with RTX graphics"
                              "electronic:price":
                                "@type": "beckn:Price"
                                "schema:price": 1499.99
                                "schema:priceCurrency": "USD"
                              "electronic:brand":
                                "@type": "schema:Brand"
                                "schema:name": "Premium Tech"
                              "beckn:rating":
                                "@type": "beckn:Rating"
                                "beckn:ratingValue": 4.8
                                "beckn:ratingCount": 156
        '400':
          description: Bad request - Invalid parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_entity_type:
                  summary: Invalid entity type error
                  description: Error when entity_type is missing or invalid
                  value:
                    error:
                      code: "INVALID_ENTITY_TYPE"
                      message: "entity_type is required and must be one of: item, provider, catalog"
        '404':
          description: No results found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                no_results:
                  summary: No results found error
                  description: Error when no items match the search criteria
                  value:
                    error:
                      code: "NO_RESULTS_FOUND"
                      message: "No items found matching the specified criteria"
                      details:
                        search_criteria:
                          entity_type: "item"
                          category: "electric_vehicles"
                          price_max: 50000
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    DiscoverRequest:
      type: object
      required:
        - id
        - ver
        - ts
        - params
        - request
      properties:
        id:
          type: string
          description: API identifier
          example: "api.beckn.discover"
        ver:
          type: string
          description: API version
          example: "v2"
        ts:
          type: string
          format: date-time
          description: Timestamp of the request
          example: "2024-04-10T16:10:50+05:30"
        params:
          $ref: '#/components/schemas/RequestParams'
        request:
          $ref: '#/components/schemas/DiscoverRequestData'

    RequestParams:
      type: object
      required:
        - msgid
        - traceid
      properties:
        msgid:
          type: string
          format: uuid
          description: Unique message identifier
          example: "4a7f14c3-d61e-4d4f-be78-181834eeff6d"
        traceid:
          type: string
          format: uuid
          description: Trace identifier for request tracking
          example: "4a7f14c3-d61e-4d4f-be78-181834eeff6d"

    DiscoverRequestData:
      type: object
      required:
        - context
      properties:
        context:
          $ref: '#/components/schemas/RequestContext'
        structured_query:
          $ref: '#/components/schemas/StructuredQuery'
        natural_query:
          $ref: '#/components/schemas/NaturalQuery'
      oneOf:
        - required: ["structured_query"]
        - required: ["natural_query"]

    RequestContext:
      type: object
      required:
        - network_id
        - action
        - schema_contexts
      properties:
        network_id:
          type: string
          description: Network identifier for the BAP (Beckn App Provider)
          example: "bap.net/electronics"
        action:
          type: string
          description: Action being performed
          example: "discover"
        schema_contexts:
          type: array
          items:
            type: string
            format: uri
          description: Array of schema context URIs including the specific item schema-settings.json
          example:
            - "https://becknprotocol.io/schema/context.jsonld"
            - "https://becknprotocol.io/schema/items/ElectronicItem/schema-settings.json"

    StructuredQuery:
      type: object
      required:
        - text_search
      properties:
        text_search:
          type: string
          description: Basic text search string
          example: "gaming laptop premium tech"
        filters:
          $ref: '#/components/schemas/FilterExpression'
        response_type:
          type: string
          enum: ["basic", "detailed"]
          default: "basic"
          description: Level of detail for the response, determined by schema-settings.json
        pagination:
          $ref: '#/components/schemas/Pagination'

    NaturalQuery:
      type: object
      required:
        - text
      properties:
        text:
          type: string
          description: Human-readable natural language search query
          example: "I want to buy a red tesla model 3 under 50k near san francisco"
        response_type:
          type: string
          enum: ["basic", "detailed"]
          default: "basic"
          description: Level of detail for the response, determined by schema-settings.json
        pagination:
          $ref: '#/components/schemas/Pagination'

    FilterExpression:
      type: object
      required:
        - operator
        - conditions
      properties:
        operator:
          type: string
          enum: [and, or, not]
          description: Logical operator for combining conditions
          example: "and"
        conditions:
          type: array
          items:
            type: string
          description: Array of filter conditions using namespace-prefixed field references. Typically filters are applied to one item type at a time, but can reference any field from the extended schemas.
          example:
            - "rating.value >= 4.0"
            - "electronic:brand.name = 'Premium Tech'"
            - "electronic:price.schema:price <= 2000"
            - "electronic:sku = 'ELECTRONIC-LAPTOP-GAMING-RTX4070-16GB'"
            - "locations.gps within_radius(40.7128, -74.0060, 10km)"



    Pagination:
      type: object
      properties:
        page:
          type: integer
          minimum: 1
          default: 1
          description: Page number for pagination
          example: 1
        limit:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Number of items per page
          example: 20

    DiscoverResponse:
      type: object
      required:
        - id
        - ver
        - ts
        - params
        - response
      properties:
        id:
          type: string
          description: API identifier
          example: "api.beckn.discover"
        ver:
          type: string
          description: API version
          example: "v2"
        ts:
          type: string
          format: date-time
          description: Timestamp of the response
          example: "2024-04-10T16:10:50+05:30"
        params:
          $ref: '#/components/schemas/RequestParams'
        response:
          $ref: '#/components/schemas/DiscoverResponseData'

    DiscoverResponseData:
      type: object
      required:
        - context
        - catalogs
      properties:
        context:
          $ref: '#/components/schemas/ResponseContext'
        catalogs:
          type: array
          items:
            $ref: '#/components/schemas/Catalog'
          description: Array of catalogs containing items

    ResponseContext:
      type: object
      required:
        - network_id
        - action
      properties:
        network_id:
          type: string
          description: Network identifier for the BAP (Beckn App Provider)
          example: "bap.net/electronics"
        action:
          type: string
          description: Action being performed
          example: "discover"

    ItemResult:
      type: object
      required:
        - "@context"
        - "@type"
      properties:
        "@context":
          type: string
          format: uri
          description: Schema context URI pointing to the specific item schema-settings.json
          example: "https://becknprotocol.io/schema/items/ElectronicItem/schema-settings.json"
        "@type":
          type: string
          description: Item type (ElectronicItem, GroceryItem, etc.)
          example: "beckn:ElectronicItem"
        # Additional properties will vary based on the item type
        # Any schema extending beckn:Item via owl:intersectionOf is supported
        # Examples shown are for ElectronicItem, but the API works with any item type
        "electronic:electronicItemId":
          type: string
          description: Unique identifier for the electronic item
          example: "tesla-model3-001"
        "schema:name":
          type: string
          description: Name of the item
          example: "Tesla Model 3"
        "beckn:descriptor":
          $ref: '#/components/schemas/Descriptor'
        "electronic:price":
          $ref: '#/components/schemas/Price'
        "electronic:brand":
          $ref: '#/components/schemas/Brand'
        "beckn:rating":
          $ref: '#/components/schemas/Rating'

    Descriptor:
      type: object
      required:
        - "@type"
        - "schema:name"
      properties:
        "@type":
          type: string
          example: "beckn:Descriptor"
        "schema:name":
          type: string
          example: "Tesla Model 3"
        "beckn:shortDesc":
          type: string
          example: "Electric sedan with autopilot"
        "beckn:longDesc":
          type: string
          example: "Premium electric sedan featuring advanced autopilot capabilities"

    Price:
      type: object
      required:
        - "@type"
        - "schema:price"
        - "schema:priceCurrency"
      properties:
        "@type":
          type: string
          example: "beckn:Price"
        "schema:price":
          type: number
          example: 45000
        "schema:priceCurrency":
          type: string
          example: "USD"

    Brand:
      type: object
      required:
        - "@type"
        - "schema:name"
      properties:
        "@type":
          type: string
          example: "schema:Brand"
        "schema:name":
          type: string
          example: "Tesla"

    Rating:
      type: object
      required:
        - "@type"
        - "beckn:ratingValue"
        - "beckn:ratingCount"
      properties:
        "@type":
          type: string
          example: "beckn:Rating"
        "beckn:ratingValue":
          type: number
          minimum: 0
          maximum: 5
          example: 4.8
        "beckn:ratingCount":
          type: integer
          minimum: 0
          example: 1250

    Catalog:
      type: object
      required:
        - "@type"
        - "beckn:descriptor"
        - "beckn:items"
      properties:
        "@type":
          type: string
          description: Type of the catalog
          example: "beckn:Catalog"
        "beckn:descriptor":
          $ref: '#/components/schemas/Descriptor'
        "beckn:timePeriod":
          $ref: '#/components/schemas/TimePeriod'
        "beckn:items":
          type: array
          items:
            $ref: '#/components/schemas/ItemResult'
          description: Array of items in this catalog

    TimePeriod:
      type: object
      required:
        - "@type"
        - "schema:startDate"
        - "schema:endDate"
      properties:
        "@type":
          type: string
          description: Type of the time period
          example: "beckn:TimePeriod"
        "schema:startDate":
          type: string
          format: date
          description: Start date of the catalog validity
          example: "2025-01-27"
        "schema:endDate":
          type: string
          format: date
          description: End date of the catalog validity
          example: "2026-12-31"

    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          $ref: '#/components/schemas/Error'

    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
          example: "INVALID_SCHEMA_FIELD"
        message:
          type: string
          description: Human-readable error message
          example: "Field 'electronic:invalidField' not found in ElectronicItem schema"
        details:
          type: object
          description: Additional error details
          additionalProperties: true

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token for API authentication

security:
  - BearerAuth: []

tags:
  - name: Discovery
    description: Item discovery and search operations
  - name: Search
    description: Search functionality across multiple schemas
  - name: Browser Search
    description: Browser-friendly URL-based search operations

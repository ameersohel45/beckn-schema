{
  "itemType": "GroceryItem",
  "version": "1.0.0",
  "description": "Validation rules for GroceryItem schema",
  
  "validationSchema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "allOf": [
      {
        "if": {"properties": {"fulfillments": {"type": "array", "items": {"properties": {"type": {"const": "delivery"}}}}}},
        "then": {"required": ["shippingInfo"]}
      },
      {
        "if": {"properties": {"organicCertification": {"type": "string"}}},
        "then": {"required": ["organicCertification"], "properties": {"organicCertification": {"minLength": 1}}}
      },
      {
        "if": {"properties": {"shippingInfo": {"type": "object", "properties": {"temperature": {"type": "object"}}}}},
        "then": {"properties": {"shippingInfo": {"properties": {"temperature": {"required": ["min", "max", "unit"]}}}}}
      },
      {
        "if": {"properties": {"organicCertification": {"type": "string"}}},
        "then": {"required": ["storageInstructions"]}
      },
      {
        "if": {"properties": {"shippingInfo": {"type": "object", "properties": {"temperature": {"type": "object"}}}}},
        "then": {"properties": {"shippingInfo": {"properties": {"temperature": {"properties": {"min": {"type": "number", "maximum": 10}, "max": {"type": "number", "minimum": 0}}}}}}}
      }
    ]
  }
}
